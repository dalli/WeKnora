# 서버 구성
server:
  port: 8080
  host: "0.0.0.0"

# 대화 서비스 구성
conversation:
  max_rounds: 5
  keyword_threshold: 0.3
  embedding_top_k: 10
  vector_threshold: 0.5
  rerank_threshold: 0.5
  rerank_top_k: 5
  fallback_strategy: "model"
  fallback_response: "죄송합니다. 이 질문에 답변할 수 없습니다."
  fallback_prompt: |
    당신은 전문적이고 친절한 AI 어시스턴트입니다. 지식을 바탕으로 사용자의 질문에 직접 답변해주세요.

    ## 답변 요구사항
    - 사용자의 질문에 직접 답변하기
    - 간결하고 명확하게, 핵심을 전달하기
    - 실시간 데이터나 개인정보가 포함된 경우, 정직하게 확인할 수 없다고 설명하기
    - 정중하고 전문적인 어조 사용하기

    ## 사용자의 질문:
    {{.Query}}
  enable_rewrite: true
  enable_query_expansion: true
  enable_rerank: true
  rewrite_prompt_system: |
    당신은 지시어 해소와 생략 보완에 특화된 지능형 어시스턴트입니다. 당신의 임무는 대화 이력을 바탕으로 사용자 질문의 대명사를 명확한 주어로 교체하고, 생략된 핵심 정보를 보완하는 것입니다.

    ## 재작성 목표
    대화 이력을 바탕으로 현재 사용자 질문을 재작성하세요. 목표는 다음과 같습니다:
    - 지시어 해소: "그것", "이것", "저것", "그", "그녀", "그들", "그녀들" 등의 대명사를 명확한 주어로 교체
    - 생략된 핵심 정보 보완하여 질문의 의미를 완전하게 만들기
    - 질문의 원래 의미와 표현 방식 유지
    - 재작성 후에도 반드시 질문 형태여야 함
    - 재작성된 질문은 30자 이내로 제한
    - 재작성된 질문만 출력하고, 설명이나 답변 시도 금지. 다른 어시스턴트가 이 질문에 답변할 것입니다.

    ## Few-shot 예시

    예시1:
    대화 이력:
    사용자: 위챗페이에는 어떤 기능이 있나요?
    어시스턴트: 위챗페이의 주요 기능으로는 송금, 결제 코드, 수금, 신용카드 상환 등 다양한 결제 서비스가 있습니다.

    사용자 질문: 그것의 보안성
    재작성 후: 위챗페이의 보안성

    예시2:
    대화 이력:
    사용자: 아이폰 배터리가 오래 가지 않는데 어떻게 해야 하나요?
    어시스턴트: 화면 밝기를 낮추고, 백그라운드 앱을 닫고, 정기적으로 시스템을 업데이트하면 배터리 수명을 연장할 수 있습니다.

    사용자 질문: 이렇게 하면 사용 경험에 영향을 주나요?
    재작성 후: 화면 밝기 낮추기와 백그라운드 앱 닫기가 사용 경험에 영향을 주는지

    예시3:
    대화 이력:
    사용자: 홍소육을 어떻게 만드나요?
    어시스턴트: 홍소육을 만들려면 먼저 고기를 데친 후, 간장, 설탕 등의 양념을 넣고 천천히 끓여야 합니다.

    사용자 질문: 얼마나 끓여야 하나요?
    재작성 후: 홍소육을 얼마나 끓여야 하나요

    예시4:
    대화 이력:
    사용자: 베이징에서 상하이까지 고속철도 요금은 얼마인가요?
    어시스턴트: 베이징에서 상하이까지 고속철도 요금은 열차와 좌석 유형에 따라 다르며, 2등석은 약 553원, 1등석은 약 933원입니다.

    사용자 질문: 시간은요?
    재작성 후: 베이징에서 상하이까지 고속철도 소요 시간

    예시5:
    대화 이력:
    사용자: 위챗 계정을 어떻게 등록하나요?
    어시스턴트: 위챗 계정을 등록하려면 위챗 앱을 다운로드하고, 전화번호를 입력하고, 인증 코드를 받은 후, 닉네임과 비밀번호를 설정해야 합니다.

    사용자 질문: 해외 전화번호도 가능한가요?
    재작성 후: 해외 전화번호로 위챗 계정을 등록할 수 있는지
  rewrite_prompt_user: |
    ## 대화 이력 배경
    {{range .Conversation}}
    ------BEGIN------
    사용자의 질문: {{.Query}}
    어시스턴트의 답변: {{.Answer}}
    ------END------
    {{end}}

    ## 재작성이 필요한 사용자 질문
    {{.Query}}

    ## 재작성된 질문
  keywords_extraction_prompt: |
    # 역할
    당신은 전문적인 키워드 추출 어시스턴트입니다. 당신의 임무는 사용자의 질문을 바탕으로 가장 중요한 키워드/구문을 추출하는 것입니다.

    # 요구사항
    - 사용자의 질문을 요약하고, 가장 중요한 키워드/구문을 제공하세요. 키워드/구문의 개수는 5개를 넘지 않아야 합니다
    - 키워드/구문을 구분하기 위해 쉼표를 구분자로 사용하세요
    - 키워드/구문은 반드시 사용자의 질문에서 나와야 하며, 허위로 만들어서는 안 됩니다
    - 설명을 출력하지 말고, 키워드/구문만 직접 출력하세요. 접두사, 설명, 구두점을 포함하지 말고, 질문에 답변하려고 시도하지 마세요. 다른 어시스턴트가 이 질문을 검색할 것입니다

    # 출력 형식
    keyword1, keyword2, keyword3, keyword4, keyword5

    # 예시

    ## 예시 1
    USER: 영어 회화 실력을 어떻게 향상시킬 수 있나요?
    ###############
    Output: 영어 회화, 회화 실력, 영어 회화 향상, 영어 회화 실력 향상, 영어 회화 연습

    ## 예시 2
    USER: 최근 상하이에서 재미있는 전시 활동이 있나요?
    ###############
    Output: 상하이 전시, 전시 활동, 상하이 전시 추천, 전시 활동 추천, 상하이 전시 활동

    ## 예시 3
    USER: 아이폰 배터리가 오래 가지 않는데 어떻게 해결하나요?
    ###############
    Output: 아이폰, 배터리 수명, 배터리 최적화, 배터리 수명 연장, 배터리 관리

    ## 예시 4
    USER: Python 로고는 어떻게 생겼나요?
    ###############
    Output: Python 로고

    ## 예시 5
    USER: iPhone으로 WiFi에 어떻게 연결하나요?
    ###############
    Output: iPhone, WiFi 연결, iPhone WiFi 연결

    # 실제 데이터
    USER: {{.Query}}

  keywords_extraction_prompt_user: |
    Output:

  generate_summary_prompt: |
    당신은 정확한 문서 요약 전문가입니다. 당신의 임무는 사용자가 제공한 문서나 단편의 핵심 내용을 추출하고 요약하는 것입니다.

    ## 핵심 요구사항
    - 요약 결과 길이는 50-100자이며, 내용의 복잡도에 따라 유연하게 조정하세요
    - 제공된 문서 내용에 완전히 기반하여 요약을 생성하고, 문서에 나타나지 않은 정보를 추가하지 마세요
    - 요약에 문서의 핵심 정보점과 주요 결론이 포함되도록 하세요
    - 문서 내용이 복잡하거나 전문적이더라도, 핵심 요점을 추출하여 요약을 시도해야 합니다
    - 요약 결과를 직접 출력하고, 서문, 접두사 또는 설명을 포함하지 마세요

    ## 형식과 스타일
    - 객관적이고 중립적인 3인칭 서술 어조를 사용하세요
    - 명확하고 간결한 한국어 표현을 사용하세요
    - 논리적 일관성을 유지하고, 문장 간에 합리적인 전환이 있도록 하세요
    - 동일한 표현 방식이나 문장 구조를 반복 사용하지 마세요

    ## 주의사항
    - "생성 불가", "요약 불가", "내용 부족" 등 거부 응답 단어를 절대 출력하지 마세요
    - 예시의 내용을 그대로 복사하거나 참조하지 말고, 사용자가 제공한 새 문서에 완전히 기반하여 요약하세요
    - 길이나 복잡도에 관계없이 모든 텍스트에 대해 최선을 다해 핵심을 추출하고 요약하세요
    
    ## 다음은 사용자가 제공한 문서 관련 정보입니다:

  generate_session_title_prompt: |
    사용자의 질문을 바탕으로 간단한 대화 제목을 생성하세요.

    요구사항:
    - 5-10자
    - 핵심 주제 추출
    - 제목만 출력하고 설명은 필요 없습니다

    사용자 질문:
  summary:
    repeat_penalty: 1.0
    temperature: 0.3
    max_completion_tokens: 2048
    no_match_prefix: |-
      <think>
      </think>
      NO_MATCH
    prompt: |
      당신은 WeKnora라는 이름의 전문적인 지능형 정보 검색 어시스턴트입니다. 당신은 전문적인 고급 비서처럼, 검색된 정보를 바탕으로 사용자의 질문에 답변하며, 어떤 선험적 지식도 활용할 수 없습니다.
      사용자가 질문을 제시하면, 어시스턴트는 특정 정보를 바탕으로 답변합니다. 어시스턴트는 먼저 마음속에서 추론 과정을 생각한 후, 사용자에게 답변을 제공합니다.
    context_template: |
      ## 답변 규칙
      - 검색된 정보의 사실에만 기반하여 답변하고, 어떤 선험적 지식도 사용하지 말며, 답변의 객관성과 정확성을 유지하세요.
      - 복잡한 질문과 답변은 Markdown 구조로 표시하며, 총설 부분은 분할할 필요가 없습니다
      - 비교적 간단한 답변인 경우, 최종 답변을 너무 세분화하지 마세요
      - 결과에 사용된 이미지 주소는 반드시 검색된 정보에서 나와야 하며, 허위로 만들어서는 안 됩니다
      - 결과의 텍스트와 이미지가 검색된 정보에서 나온 것인지 확인하고, 검색된 정보에 없는 내용을 확장한 경우 반드시 수정하여 최종 답변을 얻어야 합니다
      - 사용자 질문에 답변할 수 없는 경우, 반드시 사용자에게 사실대로 알리고 합리적인 제안을 제공하세요.

      ## 출력 제한
      - Markdown 텍스트 및 이미지 형식으로 최종 결과를 출력하세요
      - 출력 내용은 간결하면서도 포괄적이고, 조리 있게, 정보가 명확하며, 반복되지 않아야 합니다.

      ## 현재 시간:
      {{.CurrentTime}} {{.CurrentWeek}}

      ## 검색된 정보:
      ------BEGIN------
      {{range .Contexts}}
      {{.}}
      {{end}}
      ------END------

      ## 사용자의 현재 질문:
      {{.Query}}
  extract_entities_prompt: |
    ## 작업
    사용자가 제공한 텍스트에서 다음 엔티티 유형에 해당하는 모든 엔티티를 추출하세요:
    EntityTypes: [Person, Organization, Location, Product, Event, Date, Work, Concept, Resource, Category, Operation]

    ## 요구사항
    1. 추출 결과는 반드시 JSON 배열 형식으로 출력해야 합니다
    2. 각 엔티티는 title과 type 필드를 포함해야 하며, description 필드는 선택 사항이지만 강력히 권장됩니다
    3. type 필드의 값은 반드시 EntityTypes 목록에서 선택해야 하며, 새 유형을 만들어서는 안 됩니다
    4. 엔티티 유형을 확정할 수 없는 경우, 강제로 분류하지 말고 해당 엔티티를 추출하지 않는 것이 좋습니다
    5. 설명이나 추가 내용을 출력하지 말고, JSON 배열만 출력하세요
    6. 모든 필드 값에는 HTML 태그나 기타 코드를 포함할 수 없습니다
    7. 엔티티에 모호성이 있는 경우, description에서 구체적으로 무엇을 가리키는지 설명해야 합니다
    8. 엔티티를 찾지 못한 경우, 빈 배열 []을 반환하세요

    ## 엔티티 추출 규칙
    - Person: 실제 또는 가상의 인물, 역사적 인물, 현대 인물, 문학적 인물 등 포함
    - Organization: 회사, 정부 기관, 팀, 학교 등의 조직 엔티티
    - Location: 지리적 위치, 랜드마크, 국가, 도시 등
    - Product: 상품, 서비스, 브랜드 등의 상업적 제품
    - Event: 사건, 회의, 축제, 역사적 사건 등
    - Date: 날짜, 시간대, 연대 등의 시간 관련 정보
    - Work: 책, 영화, 음악, 예술 작품 등의 창작물
    - Concept: 추상적 개념, 사상, 이론 등
    - Resource: 자연 자원, 정보 자원, 도구 등
    - Category: 분류, 카테고리, 분야 등
    - Operation: 작업, 동작, 방법, 과정 등

    ## 추출 단계
    1. 텍스트를 주의 깊게 읽고 가능한 엔티티를 식별하세요
    2. 식별된 각 엔티티에 대해 가장 적합한 엔티티 유형을 결정하세요 (반드시 EntityTypes에서 선택)
    3. 다음 필드를 포함하는 JSON 객체를 각 엔티티에 대해 생성하세요:
       - title: 엔티티의 표준 이름, 따옴표 등의 수식어를 포함하지 않음
       - type: EntityTypes에서 선택한 엔티티 유형
       - description: 텍스트 내용에 기반한 엔티티에 대한 간결한 한국어 설명
    4. 각 엔티티의 모든 필드가 올바르고 형식이 적절한지 확인하세요
    5. 모든 엔티티 객체를 하나의 JSON 배열로 병합하세요
    6. 최종 JSON이 유효하고 요구사항을 충족하는지 확인하세요

    ## 예시
    [입력]
    텍스트: 《홍루몽》, 별명 《석두기》, 청나라 작가 조설근이 창작한 중국 고전 사대 명작 중 하나로, 중국 봉건 사회의 백과사전으로 불립니다. 이 책의 전 80회는 조설근이 지었고, 후 40회는 일반적으로 고악이 이은 것으로 여겨집니다. 소설은 가, 사, 왕, 설 네 가문의 흥망을 배경으로, 가보옥, 임대옥, 설보채의 사랑 비극을 주선으로 하여, 가보옥과 금릉 십이채를 중심으로 한 선악 양면, 현우 병출의 고도로 복잡한 인물 군상을 그렸습니다. 건륭 연간(1743년 전후)에 완성되어 중국 문학사상 사실주의의 정점으로, 후세에 깊은 영향을 미쳤습니다.

    [출력]
    [
      {
        "title": "홍루몽",
        "type": "Work",
        "description": "홍루몽은 청나라 작가 조설근이 창작한 중국 고전 사대 명작 중 하나로, 중국 봉건 사회의 백과사전으로 불립니다"
      },
      {
        "title": "석두기",
        "type": "Work",
        "description": "석두기는 홍루몽의 별명입니다"
      },
      {
        "title": "조설근",
        "type": "Person",
        "description": "조설근은 청나라 작가로, 홍루몽의 저자이며 전 80회를 창작했습니다"
      },
      {
        "title": "고악",
        "type": "Person",
        "description": "고악은 홍루몽 후 40회의 속작자입니다"
      },
      {
        "title": "가보옥",
        "type": "Person",
        "description": "가보옥은 홍루몽의 주요 인물로, 사랑 비극의 주인공 중 하나입니다"
      },
      {
        "title": "임대옥",
        "type": "Person",
        "description": "임대옥은 홍루몽의 주요 인물로, 사랑 비극의 주인공 중 하나입니다"
      },
      {
        "title": "설보채",
        "type": "Person",
        "description": "설보채는 홍루몽의 주요 인물로, 사랑 비극의 주인공 중 하나입니다"
      },
      {
        "title": "금릉 십이채",
        "type": "Concept",
        "description": "금릉 십이채는 홍루몽에서 가보옥을 중심으로 한 열두 명의 주요 여성 인물입니다"
      },
      {
        "title": "건륭 연간",
        "type": "Date",
        "description": "건륭 연간은 홍루몽이 완성된 시기로, 약 1743년 전후를 가리킵니다"
      },
      {
        "title": "사대 가문",
        "type": "Concept",
        "description": "사대 가문은 홍루몽의 가, 사, 왕, 설 네 가문으로, 소설의 배경입니다"
      },
      {
        "title": "중국 문학사",
        "type": "Category",
        "description": "홍루몽은 중국 문학사에서 사실주의의 정점으로 여겨집니다"
      }
    ]

  extract_relationships_prompt: |
    ## 작업
    사용자가 제공한 엔티티 배열에서 엔티티 간에 존재하는 명확한 관계를 추출하여 구조화된 관계 네트워크를 형성하세요.

    ## 요구사항
    1. 관계 추출은 제공된 텍스트 내용에 기반해야 하며, 존재하지 않는 관계를 추측해서는 안 됩니다
    2. 결과는 반드시 JSON 배열 형식으로 출력해야 하며, 각 관계는 배열의 객체입니다
    3. 각 관계 객체는 source, target, description, strength 필드를 포함해야 합니다
    4. 설명이나 추가 내용을 출력하지 말고, JSON 배열만 출력하세요
    5. 관계를 찾지 못한 경우, 빈 배열 []을 반환하세요

    ## 관계 추출 규칙
    - 텍스트에서 명확하게 나타난 관계만 추출해야 합니다
    - 소스 엔티티(source)와 타겟 엔티티(target)는 반드시 엔티티 배열에 이미 존재하는 엔티티여야 합니다
    - 관계 설명(description)은 두 엔티티 간의 구체적 관계를 간결하게 설명해야 합니다
    - 관계 강도(strength)는 다음 기준에 따라 결정해야 합니다:
      * 10점: 직접 창조/종속 관계 (예: 저자와 작품, 발명가와 발명, 모회사와 자회사)
      * 9점: 동일 엔티티의 다른 표현 형태 (예: 별명, 이전 이름)
      * 8점: 밀접하게 관련되고 서로 영향을 미치는 관계 (예: 긴밀한 파트너, 가족 구성원)
      * 7점: 명확하지만 직접적이지 않은 관계 (예: 작품의 인물, 조직의 구성원)
      * 6점: 간접적 연관이지만 명확한 연결 (예: 동료 관계, 유사 제품)
      * 5점: 연관이 있지만 비교적 느슨함 (예: 동일 분야의 다른 개념)

    ## 추출 단계
    1. 텍스트 내용을 주의 깊게 분석하여 어떤 엔티티 간에 명확한 관계가 있는지 확인하세요
    2. 텍스트에서 명확히 언급된 관계만 고려하고, 추측하지 마세요
    3. 찾은 각 관계에 대해 다음을 결정하세요:
       - source: 관계의 소스 엔티티 제목 (반드시 엔티티 목록에 있는 엔티티)
       - target: 관계의 타겟 엔티티 제목 (반드시 엔티티 목록에 있는 엔티티)
       - description: 간결하고 정확한 관계 설명 (한국어로 표현)
       - strength: 위 기준에 기반한 관계 강도 (5-10 사이의 정수)
    4. 각 관계가 양방향인지 확인하세요:
       - 관계가 양방향인 경우 (예: "A는 B의 친구"는 "B도 A의 친구"를 의미), 역방향 관계를 생성할 필요가 있는지 고려하세요
       - 관계가 단방향인 경우 (예: "A가 B를 창작"), 단방향 관계만 유지하세요
    5. 모든 관계의 일관성과 합리성을 검증하세요:
       - 모순된 관계가 없는지 확인 (예: A가 동시에 B의 아버지이자 형제)
       - 관계 설명이 관계 강도와 일치하는지 확인하세요
    6. 모든 유효한 관계를 JSON 배열로 구성하세요

    ## 예시
    [입력]
    엔티티: [
      {
        "title": "홍루몽",
        "type": "Work",
        "description": "홍루몽은 청나라 작가 조설근이 창작한 중국 고전 사대 명작 중 하나로, 중국 봉건 사회의 백과사전으로 불립니다"
      },
      {
        "title": "석두기",
        "type": "Work",
        "description": "석두기는 홍루몽의 별명입니다"
      },
      {
        "title": "조설근",
        "type": "Person",
        "description": "조설근은 청나라 작가로, 홍루몽의 저자이며 전 80회를 창작했습니다"
      },
      {
        "title": "고악",
        "type": "Person",
        "description": "고악은 홍루몽 후 40회의 속작자입니다"
      },
      {
        "title": "가보옥",
        "type": "Person",
        "description": "가보옥은 홍루몽의 주요 인물로, 사랑 비극의 주인공 중 하나입니다"
      },
      {
        "title": "임대옥",
        "type": "Person",
        "description": "임대옥은 홍루몽의 주요 인물로, 사랑 비극의 주인공 중 하나입니다"
      },
      {
        "title": "설보채",
        "type": "Person",
        "description": "설보채는 홍루몽의 주요 인물로, 사랑 비극의 주인공 중 하나입니다"
      },
      {
        "title": "사대 가문",
        "type": "Concept",
        "description": "사대 가문은 홍루몽의 가, 사, 왕, 설 네 가문으로, 소설의 배경입니다"
      },
      {
        "title": "금릉 십이채",
        "type": "Concept",
        "description": "금릉 십이채는 홍루몽에서 가보옥을 중심으로 한 열두 명의 주요 여성 인물입니다"
      },
      {
        "title": "건륭 연간",
        "type": "Date",
        "description": "건륭 연간은 홍루몽이 완성된 시기로, 약 1743년 전후를 가리킵니다"
      },
      {
        "title": "중국 문학사",
        "type": "Category",
        "description": "홍루몽은 중국 문학사에서 사실주의의 정점으로 여겨집니다"
      }
    ]

    텍스트: 《홍루몽》, 별명 《석두기》, 청나라 작가 조설근이 창작한 중국 고전 사대 명작 중 하나로, 중국 봉건 사회의 백과사전으로 불립니다. 이 책의 전 80회는 조설근이 지었고, 후 40회는 일반적으로 고악이 이은 것으로 여겨집니다. 소설은 가, 사, 왕, 설 네 가문의 흥망을 배경으로, 가보옥, 임대옥, 설보채의 사랑 비극을 주선으로 하여, 가보옥과 금릉 십이채를 중심으로 한 선악 양면, 현우 병출의 고도로 복잡한 인물 군상을 그렸습니다. 건륭 연간(1743년 전후)에 완성되어 중국 문학사상 사실주의의 정점으로, 후세에 깊은 영향을 미쳤습니다.

    [출력]
    [
      {
        "source": "조설근",
        "target": "홍루몽",
        "description": "조설근은 홍루몽의 주요 저자로, 전 80회를 창작했습니다",
        "strength": 10
      },
      {
        "source": "고악",
        "target": "홍루몽",
        "description": "고악은 홍루몽 후 40회의 속작자입니다",
        "strength": 10
      },
      {
        "source": "홍루몽",
        "target": "석두기",
        "description": "석두기는 홍루몽의 별명입니다",
        "strength": 9
      },
      {
        "source": "홍루몽",
        "target": "중국 문학사",
        "description": "홍루몽은 중국 문학사에서 사실주의의 정점으로 여겨집니다",
        "strength": 7
      },
      {
        "source": "가보옥",
        "target": "임대옥",
        "description": "가보옥과 임대옥은 깊은 사랑 관계를 가지며, 소설의 주선 중 하나입니다",
        "strength": 8
      },
      {
        "source": "가보옥",
        "target": "설보채",
        "description": "가보옥과 설보채의 관계는 소설의 사랑 비극 주선의 일부입니다",
        "strength": 8
      },
      {
        "source": "가보옥",
        "target": "금릉 십이채",
        "description": "가보옥은 금릉 십이채 이야기의 중심 인물입니다",
        "strength": 8
      },
      {
        "source": "홍루몽",
        "target": "가보옥",
        "description": "가보옥은 홍루몽의 주요 인물입니다",
        "strength": 7
      },
      {
        "source": "홍루몽",
        "target": "임대옥",
        "description": "임대옥은 홍루몽의 주요 인물입니다",
        "strength": 7
      },
      {
        "source": "홍루몽",
        "target": "설보채",
        "description": "설보채는 홍루몽의 주요 인물입니다",
        "strength": 7
      },
      {
        "source": "홍루몽",
        "target": "사대 가문",
        "description": "사대 가문은 홍루몽의 배경 설정입니다",
        "strength": 7
      },
      {
        "source": "홍루몽",
        "target": "금릉 십이채",
        "description": "금릉 십이채는 홍루몽의 중요한 개념입니다",
        "strength": 7
      },
      {
        "source": "홍루몽",
        "target": "건륭 연간",
        "description": "홍루몽은 건륭 연간에 완성되었으며, 약 1743년 전후입니다",
        "strength": 6
      }
    ]

  generate_questions_prompt: |
    당신은 전문적인 질문 생성 어시스턴트입니다. 당신의 임무는 주어진 【주요 내용】을 바탕으로 사용자가 물어볼 수 있는 관련 질문을 생성하는 것입니다.

    {{.Context}}
    ## 주요 내용 (이 내용을 바탕으로 질문을 생성하세요)
    문서 이름: {{.DocName}}
    문서 내용:
    {{.Content}}

    ## 핵심 요구사항
    - 생성된 질문은 【주요 내용】과 직접적으로 관련되어야 합니다
    - 질문에서 모든 대명사나 지시어 사용 금지 (예: "그것", "이것", "해당 문서", "본문", "문중", "그" 등), 반드시 구체적인 이름으로 대체해야 합니다
    - 질문은 완전하고 독립적이어야 하며, 맥락에서 벗어나도 이해할 수 있어야 합니다
    - 질문은 사용자가 실제 상황에서 제기할 수 있는 자연스러운 질문이어야 합니다
    - 질문은 다양해야 하며, 내용의 다양한 측면을 다뤄야 합니다
    - 각 질문은 간결하고 명확해야 하며, 길이는 30자 이내로 제한하세요
    - 생성할 질문 수는 {{.QuestionCount}}개입니다

    ## 질문 유형 제안
    - 정의 유형: ...이란 무엇인가요? ...는 무엇인가요?
    - 원인 유형: 왜 ...인가요? ...의 원인은 무엇인가요?
    - 방법 유형: 어떻게 ...하나요? ...하는 방법은?
    - 비교 유형: ...와 ...의 차이점은 무엇인가요?
    - 적용 유형: ...는 어떤 상황에서 사용할 수 있나요?

    ## 출력 형식
    질문 목록을 직접 출력하고, 한 줄에 하나씩, 번호나 기타 접두사 없이 출력하세요.

# 지식베이스 구성
knowledge_base:
  chunk_size: 512
  chunk_overlap: 50
  split_markers: ["\n\n", "\n", "。"]
  image_processing:
    enable_multimodal: true

extract:
  extract_graph:
    description: |
      주어진 텍스트를 바탕으로 다음 단계에 따라 정보 추출 작업을 완료하세요. 논리가 명확하고 정보가 완전하고 정확하도록 하세요:

      ## 1. 엔티티 추출 및 속성 보완
      1. **핵심 엔티티 추출**: 텍스트를 통독하고, 논리적 순서(예: 텍스트 서술 순서, 엔티티 연관 밀도)에 따라 작업과 관련된 모든 핵심 엔티티를 추출하세요.
      2. **엔티티 상세 속성 보완**: 추출된 각 엔티티에 대해, 텍스트에서 명확히 언급된 상세 속성을 포괄적으로 보완하고, 핵심 속성이 누락되지 않도록 하세요.

      ## 2. 관계 추출 및 검증
      1. **관계 유형 명확화**: 지정된 관계 목록에서만 해당 유형을 선택하고, 관계 유형을 다음으로 제한합니다: %s.
      2. **유효한 관계 추출**: 추출된 엔티티 및 속성을 바탕으로 텍스트에 실제로 존재하는 관계를 식별하고, 관계가 텍스트 사실에 부합하며 허위 연관이 없도록 하세요.
      3. **관계 주체 명확화**: 추출된 각 관계 그룹에 대해 두 연관 주체를 명확히 표시하고, 주체 혼동을 피하세요.
      4. **연관 속성 보완**: 텍스트에 해당 관계와 직접 관련된 보완 정보가 있는 경우, 이 정보를 관계의 연관 속성으로 보완하여 관계 정보를 더욱 완성하세요.
    tags:
      - "저자"
      - "별명"
    examples:
      - text: |
          《홍루몽》, 별명 《석두기》, 청나라 작가 조설근이 창작한 중국 고전 사대 명작 중 하나로, 중국 봉건 사회의 백과사전으로 불립니다. 이 책의 전 80회는 조설근이 지었고, 후 40회는 일반적으로 고악이 이은 것으로 여겨집니다.
          소설은 가, 사, 왕, 설 네 가문의 흥망을 배경으로, 가보옥, 임대옥, 설보채의 사랑 비극을 주선으로 하여, 가보옥과 금릉 십이채를 중심으로 한 선악 양면, 현우 병출의 고도로 복잡한 인물 군상을 그렸습니다.
          건륭 연간(1743년 전후)에 완성되어 중국 문학사상 사실주의의 정점으로, 후세에 깊은 영향을 미쳤습니다.
        node:
          - name: "홍루몽"
            attributes:
              - "중국 고전 사대 명작 중 하나"
              - "별명 《석두기》"
              - "중국 봉건 사회의 백과사전으로 불림"
          - name: "석두기"
            attributes:
              - "《홍루몽》의 별명"
          - name: "조설근"
            attributes:
              - "청나라 작가"
              - "《홍루몽》 전 80회의 저자"
          - name: "고악"
            attributes:
              - "일반적으로 《홍루몽》 후 40회의 속작자로 여겨짐"
        relation:
          - node1: "홍루몽"
            node2: "조설근"
            type: "저자"
          - node1: "홍루몽"
            node2: "고악"
            type: "저자"
          - node1: "홍루몽"
            node2: "석두기"
            type: "별명"
  extract_entity:
    description: |
      사용자가 제공한 질문을 바탕으로 다음 단계에 따라 핵심 정보 추출 작업을 처리하세요:
      1. 논리적 연관 정리: 먼저 텍스트 내용을 완전히 분석하고, 핵심 논리 관계를 명확히 하며, 해당 핵심 논리 유형을 간단히 표시하세요;
      2. 핵심 엔티티 추출: 정리된 논리 관계를 중심으로 텍스트의 핵심 정보를 정확히 추출하고 명확한 엔티티로 분류하며, 핵심 정보가 누락되지 않고 불필요한 내용이 추가되지 않도록 하세요;
      3. 엔티티 우선순위 정렬: 엔티티와 텍스트 핵심 주제의 연관 밀도에 따라 정렬하고, 텍스트 주제를 이해하는 데 가장 중요한 엔티티를 우선적으로 제시하세요;
    examples:
      - text: "《홍루몽》, 별명 《석두기》, 청나라 작가 조설근이 창작한 중국 고전 사대 명작 중 하나로, 중국 봉건 사회의 백과사전으로 불립니다."
        node:
          - name: "홍루몽"
          - name: "조설근"
          - name: "중국 고전 사대 명작"
  fabri_text:
    with_tag: |
      %s 등과 관련된 내용의 텍스트를 무작위로 생성하세요. 글자 수는 [50-200]자 사이이며, 이러한 태그와 관련된 전문 용어나 전형적인 요소를 최대한 포함하여 텍스트를 더욱 구체적이고 관련성 있게 만드세요.
    with_no_tag: |
      텍스트를 무작위로 생성하세요. 내용은 자유롭게 작성하고, 글자 수는 [50-200]자 사이입니다. 

# 웹 검색 구성
web_search:
  # 사용 가능한 검색 엔진 목록
  providers:
    - id: "duckduckgo"
      name: "DuckDuckGo"
      free: true
      requires_api_key: false
      description: "DuckDuckGo API"

  
  # 기본 구성
  default:
    provider: "duckduckgo"
    max_results: 5
    include_date: true
    compression_method: "none"
    blacklist: []
  
  # 전역 타임아웃 설정
  timeout: 10

# 테넌트 구성
tenant:
  # 크로스 테넌트 접근 기능 활성화 여부 (내부 네트워크 환경에서 활성화 가능)
  enable_cross_tenant_access: false
